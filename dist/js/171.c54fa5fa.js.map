{"version":3,"file":"js/171.c54fa5fa.js","mappings":"sPAWA,GAA4B,QAAiB,CAC3CA,OAAQ,iBACRC,MAAMC,IAEU,QAAY,IACf,QAAY,KACf,QAAY,GAFxB,IAGIC,GAAc,QAAI,KACtB,SAAU,KACNC,GAAgB,IAGpB,MAAMC,EAAcC,IAChBC,QAAQC,IAAIF,EAAIG,GAAG,EAEjBC,EAAgBJ,IAClB,IAAIK,EAAY,CACZC,YAAa,eACbC,YAAa,CAAC,WAElBC,EAAA,WAAe,gBAAiBH,GAAWI,MAAMC,IACzCA,IACA,EAAAC,EAAA,GAAM,CACFC,IAAK,4CACLC,OAAQ,SACRC,KAAM,cAAa,CACfX,GAAIH,EAAIG,GACRY,MAAOP,EAAA,iCAEXQ,QAAS,CACL,eAAgB,uCAErBP,MAAMC,IAEW,WAAZA,EAAII,MAAiC,UAAZJ,EAAII,OAC7B,QAAU,CACNG,QAAS,iBACTC,SAAU,IACVC,KAAM,W,MAMxB,EAIAC,EAAUpB,KACZ,EAAAW,EAAA,GAAM,CACFC,IAAK,yCACLC,OAAQ,OACRC,KAAM,cAAa,CACfX,GAAIH,EAAIG,GACRY,MAAOP,EAAA,mCAEZC,MAAMC,IACW,UAAZA,EAAII,QACJ,QAAU,CACNG,QAAS,UACTC,SAAU,IACVC,KAAM,YAEVrB,I,GAEN,EAGAA,EAAiB,MACnB,EAAAa,EAAA,GAAM,CACFC,IAAK,yCACLC,OAAQ,QACTJ,MAAMC,IACLb,EAAYwB,MAAQX,EAAII,IAAI,GAC9B,EAQN,MAAO,CAACQ,EAAUC,MACR,WAAc,SAAa,QAAO,MAAU,CAClDT,MAAM,QAAOjB,GACb2B,MAAO,CAAC,MAAQ,SACf,CACDC,SAAS,SAAS,IAAM,EACtB,SAAa,QAAO,MAAgB,CAClCC,MAAO,SACPC,MAAO,KACPC,KAAM,KACNC,MAAO,UAET,SAAa,QAAO,MAAgB,CAClCF,MAAO,KACPC,KAAM,QACNC,MAAO,UAET,SAAa,QAAO,MAAgB,CAClCH,MAAO,SACPC,MAAO,KACPC,KAAM,WACNC,MAAO,WAET,SAAa,QAAO,MAAgB,CAClCH,MAAO,SACPC,MAAO,OACPC,KAAM,cACNC,MAAO,WAET,SAAa,QAAO,MAAgB,CAClCH,MAAO,SACPC,MAAO,OACPC,KAAM,cACNC,MAAO,WAET,SAAa,QAAO,MAAgB,CAClCC,MAAO,QACPD,MAAO,SACN,CACDJ,SAAS,SAAUM,GAAU,EAC3B,SAAa,QAAO,MAAW,CAC7BC,KAAM,QACNb,KAAM,UACNc,QAAUC,GAAiBd,EAAOW,EAAM/B,MACvC,CACDyB,SAAS,SAAS,IAAM,EACtB,QAAiB,SAEnBU,EAAG,GACF,KAAM,CAAC,aACV,SAAa,QAAO,MAAW,CAC7BH,KAAM,QACNb,KAAM,UACNc,QAAUC,GAAiBnC,EAAWgC,EAAM/B,MAC3C,CACDyB,SAAS,SAAS,IAAM,EACtB,QAAiB,SAEnBU,EAAG,GACF,KAAM,CAAC,aACV,SAAa,QAAO,MAAW,CAC7BH,KAAM,QACNb,KAAM,SACNc,QAAUC,GAAiB9B,EAAa2B,EAAM/B,MAC7C,CACDyB,SAAS,SAAS,IAAM,EACtB,QAAiB,SAEnBU,EAAG,GACF,KAAM,CAAC,eAEZA,EAAG,OAGPA,EAAG,GACF,EAAG,CAAC,SAET,ICvKA,MAAMC,EAAc,EAEpB,O","sources":["webpack://bank-end/./src/views/article/ArticleTopList.vue?a2f4","webpack://bank-end/./src/views/article/ArticleTopList.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport store from '@/store';\r\nimport axios from 'axios';\r\nimport { computed, onMounted, reactive, ref } from 'vue';\r\nimport Qs from 'qs';\r\nimport router from '@/router';\r\nimport { ElTable, ElTableColumn, ElButton, ElMessage } from 'element-plus';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ArticleTopList',\n  setup(__props) {\n\r\nlet currentpage = ref<number>(1)\r\nlet pagesize = ref<number>(15)\r\nlet total = ref<number>(0)\r\nlet top_article = ref([])\r\nonMounted(() => {\r\n    getTopArticles()\r\n})\r\n\r\nconst handleEdit = (row: { id: number }) => {\r\n    console.log(row.id)\r\n}\r\nconst handleDelete = (row: { id: number }) => {\r\n    let checkInfo = {\r\n        contentType: 'mweb_article',\r\n        permissions: ['delete']\r\n    }\r\n    store.dispatch(\"checkUserPerm\", checkInfo).then((res) => {\r\n        if (res) {\r\n            axios({\r\n                url: 'http://127.0.0.1:9000/api/delete-article/',\r\n                method: 'delete',\r\n                data: Qs.stringify({\r\n                    id: row.id,\r\n                    token: store.getters.isnotUserlogin.token\r\n                }),\r\n                headers: {\r\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n                }\r\n            }).then((res) => {\r\n                // console.log(res)\r\n                if (res.data == 'nologin' || res.data == 'noperm') {\r\n                    ElMessage({\r\n                        message: '用户没有权限或登录信息过期.',\r\n                        duration: 1000,\r\n                        type: 'warning',\r\n                    })\r\n                    return\r\n                }\r\n            })\r\n        }\r\n    })\r\n}\r\n\r\n// 置顶\r\nconst In_top = (row: { id: number }) => {\r\n    axios({\r\n        url: 'http://127.0.0.1:9000/api/article-top/',\r\n        method: 'post',\r\n        data: Qs.stringify({\r\n            id: row.id,\r\n            token: store.getters.isnotUserlogin.token\r\n        })\r\n    }).then((res) => {\r\n        if (res.data == 'cancel') {\r\n            ElMessage({\r\n                message: '取消置顶成功.',\r\n                duration: 1000,\r\n                type: 'success',\r\n            })\r\n            getTopArticles()\r\n        }\r\n    })\r\n}\r\n\r\nconst getTopArticles = () => {\r\n    axios({\r\n        url: 'http://127.0.0.1:9000/api/article-top/',\r\n        method: 'get'\r\n    }).then((res) => {\r\n        top_article.value = res.data\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(ElTable), {\n    data: _unref(top_article),\n    style: {\"width\":\"100%\"}\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_unref(ElTableColumn), {\n        align: \"center\",\n        label: \"id\",\n        prop: \"id\",\n        width: \"50px\"\n      }),\n      _createVNode(_unref(ElTableColumn), {\n        label: \"标题\",\n        prop: \"title\",\n        width: \"auto\"\n      }),\n      _createVNode(_unref(ElTableColumn), {\n        align: \"center\",\n        label: \"分类\",\n        prop: \"classify\",\n        width: \"100px\"\n      }),\n      _createVNode(_unref(ElTableColumn), {\n        align: \"center\",\n        label: \"创建时间\",\n        prop: \"create_time\",\n        width: \"200px\"\n      }),\n      _createVNode(_unref(ElTableColumn), {\n        align: \"center\",\n        label: \"更新时间\",\n        prop: \"update_time\",\n        width: \"200px\"\n      }),\n      _createVNode(_unref(ElTableColumn), {\n        fixed: \"right\",\n        width: \"200px\"\n      }, {\n        default: _withCtx((scope) => [\n          _createVNode(_unref(ElButton), {\n            size: \"small\",\n            type: \"primary\",\n            onClick: ($event: any) => (In_top(scope.row))\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"取消\")\n            ]),\n            _: 2\n          }, 1032, [\"onClick\"]),\n          _createVNode(_unref(ElButton), {\n            size: \"small\",\n            type: \"warning\",\n            onClick: ($event: any) => (handleEdit(scope.row))\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"编辑\")\n            ]),\n            _: 2\n          }, 1032, [\"onClick\"]),\n          _createVNode(_unref(ElButton), {\n            size: \"small\",\n            type: \"danger\",\n            onClick: ($event: any) => (handleDelete(scope.row))\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"删除\")\n            ]),\n            _: 2\n          }, 1032, [\"onClick\"])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"data\"]))\n}\n}\n\n})","import script from \"./ArticleTopList.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./ArticleTopList.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["__name","setup","__props","top_article","getTopArticles","handleEdit","row","console","log","id","handleDelete","checkInfo","contentType","permissions","store","then","res","axios","url","method","data","token","headers","message","duration","type","In_top","value","_ctx","_cache","style","default","align","label","prop","width","fixed","scope","size","onClick","$event","_","__exports__"],"sourceRoot":""}