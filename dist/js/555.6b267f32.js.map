{"version":3,"file":"js/555.6b267f32.js","mappings":"qOAGA,MAAMA,EAAa,CAAEC,MAAO,wBAW5B,OAA4B,QAAiB,CAC3CC,OAAQ,UACRC,MAAMC,GAER,IAAIC,GAAiB,UAErB,MAAMC,EAAc,MAChB,QAAeD,EAAeE,OAAOC,MAAMC,IAE5B,sBAAPA,IACA,QAAU,CACNC,QAAS,kBACTC,KAAM,QACNC,SAAU,MAGP,MAAPH,KACA,QAAU,CACNC,QAAS,QACTE,SAAU,IACVD,KAAM,YAEVE,EAAA,OAAY,CAAEC,KAAM,0B,GAE1B,EAIAC,EAAcC,MAAOC,EAAoBC,KAC3C,MAAMT,QAAYU,QAAQC,IACtBH,EAAMI,KAAKC,GACA,IAAIH,SAAa,CAACI,EAAKC,KAC1B,MAAMC,EAAO,IAAIC,SACjBD,EAAKE,OAAO,OAAQL,IACpB,EAAAM,EAAA,GAAM,CACFC,IAAK,0CACLC,OAAQ,OACRC,QAAS,CAAE,eAAgB,uBAC3BC,KAAMP,IACPjB,MAAMC,GAAQc,EAAId,KAChBwB,OAAOC,GAAUV,EAAIU,IAAO,OAI7ChB,EAAST,EAAIY,KAAKc,GAASA,EAAKH,OAAM,EAG1C,MAAO,CAACI,EAAUC,MACR,WAAc,QAAoB,MAAOrC,EAAY,EAC3D,SAAa,QAAO,KAAW,CAC7BsC,YAAY,QAAOjC,GACnB,sBAAuBgC,EAAO,KAAOA,EAAO,GAAME,IAAiB,QAAOlC,GAAkB,EAAiBE,MAAQgC,EAASlC,EAAiBkC,GAC/IC,SAAUlC,EACVmC,cAAe1B,GACd,KAAM,EAAG,CAAC,iBAGjB,ICpEA,MAAM2B,EAAc,EAEpB,O","sources":["webpack://bank-end/./src/views/friends/friends.vue?b491","webpack://bank-end/./src/views/friends/friends.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, isRef as _isRef, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"edit-friend-template\" }\n\nimport { ref } from 'vue';\r\nimport { saveNewArticle, getAllCategories } from '@/requests/api'\r\nimport { ElMessage } from 'element-plus';\r\nimport router from '@/router';\r\nimport axios from 'axios';\r\nimport MdEditor from 'md-editor-v3';\r\nimport 'md-editor-v3/lib/style.css';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'friends',\n  setup(__props) {\n\r\nlet friendTemplate = ref()\r\n//保存\r\nconst saveArticle = () => {\r\n    saveNewArticle(friendTemplate.value).then((res) => {\r\n        // console.log(res);\r\n        if (res == 'save article error') {\r\n            ElMessage({\r\n                message: \"保存文章错误，请查看后端日志.\",\r\n                type: \"error\",\r\n                duration: 3000\r\n            })\r\n        }\r\n        if (res == 'ok') {\r\n            ElMessage({\r\n                message: '保存成功.',\r\n                duration: 1000,\r\n                type: 'success',\r\n            })\r\n            router.push({ path: '/article/article-list' })\r\n        }\r\n    })\r\n\r\n}\r\n\r\nconst onUploadImg = async (files: Array<File>, callback: (urls: Array<string>) => void) => {\r\n    const res = await Promise.all(\r\n        files.map((file) => {\r\n            return new Promise<any>((rev, rej) => {\r\n                const form = new FormData();\r\n                form.append(\"file\", file);\r\n                axios({\r\n                    url: 'http://127.0.0.1:9000/api/upload-image/',\r\n                    method: 'post',\r\n                    headers: { \"Content-Type\": \"multipart/form-data\" },\r\n                    data: form,\r\n                }).then((res) => rev(res))\r\n                    .catch((error) => rej(error));\r\n            });\r\n        })\r\n    );\r\n    callback(res.map((item) => item.data));\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_unref(MdEditor), {\n      modelValue: _unref(friendTemplate),\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(friendTemplate) ? (friendTemplate).value = $event : friendTemplate = $event)),\n      onOnSave: saveArticle,\n      onOnUploadImg: onUploadImg\n    }, null, 8, [\"modelValue\"])\n  ]))\n}\n}\n\n})","import script from \"./friends.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./friends.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","class","__name","setup","__props","friendTemplate","saveArticle","value","then","res","message","type","duration","router","path","onUploadImg","async","files","callback","Promise","all","map","file","rev","rej","form","FormData","append","axios","url","method","headers","data","catch","error","item","_ctx","_cache","modelValue","$event","onOnSave","onOnUploadImg","__exports__"],"sourceRoot":""}